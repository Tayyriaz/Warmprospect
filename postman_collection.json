{
	"info": {
		"name": "GoAccel Chatbot Platform API",
		"description": "Complete API collection for GoAccel Chatbot Platform - Multi-tenant AI concierge system",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "goaccel"
	},
	"item": [
		{
			"name": "Public Endpoints",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						},
						"description": "Detailed health endpoint to verify the system status"
					},
					"response": []
				},
				{
					"name": "Chat - Send Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"business_id\": \"example_business\",\n  \"user_id\": \"user_123\",\n  \"message\": \"Hello, I'd like to book an appointment\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/chat",
							"host": ["{{base_url}}"],
							"path": ["chat"]
						},
						"description": "Main API endpoint to handle incoming chat messages. Rate limited to 5 requests per minute per user.\n\n**Required Fields:**\n- `business_id`: Identifies which business's chatbot to use\n- `user_id` or `session_id`: Unique identifier for the conversation session\n- `message`: User's message/input\n\n**Response:**\n- `response`: AI-generated response text (CTAs are NEVER included in response text)\n- `cta`: (optional) Separate CTA array - CTAs are always returned as a separate field, never in the response text\n\n**Note**: The system uses `business_id:user_id` as the session key for complete isolation between businesses and users."
					},
					"response": []
				},
				{
					"name": "Get Business Config for Widget",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/business/:business_id/config",
							"host": ["{{base_url}}"],
							"path": ["api", "business", ":business_id", "config"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Get business configuration for frontend widget. Returns business-specific settings like branding, CTAs, greeting message, etc."
					},
					"response": []
				},
				{
					"name": "RAG Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/rag/status",
							"host": ["{{base_url}}"],
							"path": ["rag", "status"]
						},
						"description": "Returns whether the RAG index is loaded"
					},
					"response": []
				},
				{
					"name": "Test RAG for Business",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/rag/test/:business_id",
							"host": ["{{base_url}}"],
							"path": ["rag", "test", ":business_id"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Test RAG retrieval for a specific business"
					},
					"response": []
				},
				{
					"name": "Handle CTA Click",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"business_id\": \"example_business\",\n  \"session_id\": \"user_123\",\n  \"cta_id\": \"learn_services\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/chat/cta",
							"host": ["{{base_url}}"],
							"path": ["api", "chat", "cta"]
						},
						"description": "Handle CTA click - return children CTAs for the clicked CTA. Tree-based approach: Frontend sends CTA ID, backend returns children.\n\n**Required Fields:**\n- `business_id`: Identifies which business's chatbot to use\n- `cta_id`: ID of the clicked CTA\n- `session_id`: (optional) Session ID for analytics tracking\n\n**Response:**\n- `response`: Response message\n- `cta`: Array of child CTA objects for the clicked CTA (always separate, never in response text)"
					},
					"response": []
				}
			],
			"description": "Public endpoints that don't require authentication"
		},
		{
			"name": "Admin Endpoints",
			"item": [
				{
					"name": "Create or Update Business",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"businessId\": \"example_business\",\n  \"businessName\": \"Example Business Name\",\n  \"systemPrompt\": \"You are a friendly AI assistant for Example Business.\",\n  \"greetingMessage\": \"Welcome! How can I help you today?\",\n  \"primaryGoal\": \"Lead generation and customer support\",\n  \"personality\": \"Friendly, professional, and helpful\",\n  \"privacyStatement\": \"We respect your privacy...\",\n  \"themeColor\": \"#2563eb\",\n  \"widgetPosition\": \"center\",\n  \"websiteUrl\": \"https://example.com\",\n  \"contactEmail\": \"contact@example.com\",\n  \"contactPhone\": \"+1234567890\",\n  \"chatbotButtonText\": \"Chat with us\",\n  \"businessLogo\": \"https://example.com/logo.png\",\n  \"voiceEnabled\": false,\n  \"ctaTree\": {\n    \"get_started\": {\n      \"id\": \"get_started\",\n      \"label\": \"Get Started\",\n      \"action\": \"show_children\",\n      \"children\": [\"learn_more\", \"book_call\"]\n    },\n    \"learn_more\": {\n      \"id\": \"learn_more\",\n      \"label\": \"Learn More\",\n      \"action\": \"send\",\n      \"message\": \"Tell me more about your services\"\n    },\n    \"book_call\": {\n      \"id\": \"book_call\",\n      \"label\": \"Book a Call\",\n      \"action\": \"redirect\",\n      \"url\": \"https://calendly.com/example\"\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/admin/business",
							"host": ["{{base_url}}"],
							"path": ["admin", "business"]
						},
						"description": "Create or update a business configuration. **Note**: Knowledge base scraping must be triggered separately using `/admin/business/{business_id}/scrape` endpoint.\n\n**Required Fields:**\n- `businessId`: Unique identifier for the business\n- `businessName`: Display name for the business\n- `systemPrompt`: Business-specific system prompt/instructions\n\n**Optional Fields:**\n- `greetingMessage`: Initial greeting message\n- `primaryGoal`: Primary business goal\n- `personality`: Personality description\n- `privacyStatement`: Privacy statement text\n- `themeColor`: Theme color (hex code, default: #2563eb)\n- `widgetPosition`: Widget position (center, bottom-right, etc., default: center)\n- `websiteUrl`: Website URL for knowledge base scraping (required for KB scraping)\n- `contactEmail`: Contact email\n- `contactPhone`: Contact phone number\n- `chatbotButtonText`: Text for the chatbot button (e.g., \"Chat with us\")\n- `businessLogo`: Base64 encoded image (data:image/...) or URL to business logo\n- `ctaTree`: JSON object defining hierarchical CTA tree structure (replaces deprecated primary/secondary CTAs)\n- `voiceEnabled`: Boolean to enable voice bot (phone calls) for this business\n\n**Note**: The system uses database-only storage (PostgreSQL). All configurations are stored in the database."
					},
					"response": []
				},
				{
					"name": "List All Businesses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business",
							"host": ["{{base_url}}"],
							"path": ["admin", "business"]
						},
						"description": "List all configured businesses. Returns a dictionary of all businesses keyed by business_id."
					},
					"response": []
				},
				{
					"name": "Get Business Config",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business/:business_id",
							"host": ["{{base_url}}"],
							"path": ["admin", "business", ":business_id"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Get complete business configuration by business_id"
					},
					"response": []
				},
				{
					"name": "Delete Business",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business/:business_id",
							"host": ["{{base_url}}"],
							"path": ["admin", "business", ":business_id"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Delete a business configuration"
					},
					"response": []
				},
				{
					"name": "Trigger Knowledge Base Scraping",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business/:business_id/scrape",
							"host": ["{{base_url}}"],
							"path": ["admin", "business", ":business_id", "scrape"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Manually trigger knowledge base scraping for a business. Requires the business to have a `websiteUrl` configured. Scraping runs in the background - use `/scraping-status` endpoint to check progress.\n\n**Response:**\n- `success`: Boolean indicating success\n- `message`: Status message\n- `business_id`: Business identifier\n- `website_url`: Website URL being scraped"
					},
					"response": []
				},
				{
					"name": "Refresh Knowledge Base",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business/:business_id/refresh-kb",
							"host": ["{{base_url}}"],
							"path": ["admin", "business", ":business_id", "refresh-kb"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Refresh/rebuild the knowledge base for a business from scratch. This clears old index files and rebuilds the knowledge base. Useful when website content has been updated.\n\n**Response:**\n- `success`: Boolean indicating success\n- `message`: Status message\n- `business_id`: Business identifier\n- `website_url`: Website URL being scraped"
					},
					"response": []
				},
				{
					"name": "Get Scraping Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Admin-API-Key",
								"value": "{{admin_api_key}}",
								"description": "Admin API key for authentication"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/business/:business_id/scraping-status",
							"host": ["{{base_url}}"],
							"path": ["admin", "business", ":business_id", "scraping-status"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							]
						},
						"description": "Get current knowledge base scraping status for a business.\n\n**Response:**\n- `status`: Current status (\"not_started\", \"pending\", \"scraping\", \"indexing\", \"completed\", \"failed\")\n- `message`: Status message\n- `progress`: Progress percentage (0-100)\n- `updated_at`: Timestamp of last update"
					},
					"response": []
				}
			],
			"description": "Admin endpoints protected by API key authentication. Use X-Admin-API-Key header."
		},
		{
			"name": "Analytics Endpoints",
			"item": [
				{
					"name": "Get Session Analytics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/analytics/session/:session_id",
							"host": ["{{base_url}}"],
							"path": ["api", "analytics", "session", ":session_id"],
							"variable": [
								{
									"key": "session_id",
									"value": "user_123"
								}
							]
						},
						"description": "Get analytics metrics for a specific session. Rate limited to 30 requests per minute.\n\n**Response:**\n- `session_id`: Session identifier\n- `metrics`: Session metrics (message count, CTA clicks, etc.)\n- `conversation_plan`: Conversation plan progress\n- `current_state`: Current conversation state\n- `intent`: Detected intent\n- `sentiment`: Sentiment analysis"
					},
					"response": []
				},
				{
					"name": "Get Business Analytics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/analytics/business/:business_id?hours=24",
							"host": ["{{base_url}}"],
							"path": ["api", "analytics", "business", ":business_id"],
							"variable": [
								{
									"key": "business_id",
									"value": "example_business"
								}
							],
							"query": [
								{
									"key": "hours",
									"value": "24",
									"description": "Time range in hours (default: 24)"
								}
							]
						},
						"description": "Get aggregated analytics for a business. Rate limited to 30 requests per minute.\n\n**Query Parameters:**\n- `hours`: Time range in hours (default: 24)\n\n**Response:**\n- `business_id`: Business identifier\n- `time_range_hours`: Time range used\n- Aggregated metrics (total sessions, messages, CTAs clicked, etc.)"
					},
					"response": []
				}
			],
			"description": "Analytics endpoints for tracking session and business metrics. Rate limited to 30 requests per minute."
		},
		{
			"name": "Voice Endpoints",
			"item": [
				{
					"name": "Voice Chat (Audio File)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": [],
									"description": "Audio file (WAV, MP3, WebM, or raw PCM). Will be converted to 16kHz PCM for Gemini Live API."
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/voice/chat",
							"host": ["{{base_url}}"],
							"path": ["api", "voice", "chat"]
						},
						"description": "Accepts an audio file, sends it to Gemini Live API, and returns a WAV audio response. The input audio is converted to the format Gemini expects (16kHz PCM), and the response is converted back to a standard WAV file (24kHz).\n\n**Supported Formats:**\n- WAV\n- MP3\n- WebM\n- Raw PCM (16kHz mono)\n\n**Response:**\n- Returns WAV audio file (24kHz) with the AI's voice response"
					},
					"response": []
				},
				{
					"name": "Make Outgoing Call",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone_number\": \"+1234567890\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/make-call",
							"host": ["{{base_url}}"],
							"path": ["make-call"]
						},
						"description": "Initiates an outgoing call to the specified phone number using Twilio. Requires Twilio credentials to be configured.\n\n**Required Fields:**\n- `phone_number`: Phone number in E.164 format (e.g., +1234567890)\n\n**Response:**\n- `success`: Boolean indicating success\n- `call_sid`: Twilio Call SID\n- `message`: Status message"
					},
					"response": []
				},
				{
					"name": "Twilio Incoming Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "CallSid",
									"value": "CA1234567890abcdef",
									"description": "Twilio Call SID"
								},
								{
									"key": "From",
									"value": "+1234567890",
									"description": "Caller's phone number"
								},
								{
									"key": "To",
									"value": "+0987654321",
									"description": "Called phone number"
								},
								{
									"key": "CallStatus",
									"value": "ringing",
									"description": "Call status"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/voice/incoming?business_id=example_business",
							"host": ["{{base_url}}"],
							"path": ["voice", "incoming"],
							"query": [
								{
									"key": "business_id",
									"value": "example_business",
									"description": "Identifies which business's chatbot to use"
								}
							]
						},
						"description": "Twilio webhook for incoming calls. Returns TwiML XML to start a Media Stream (WebSocket). Businesses route their Twilio phone calls to this endpoint.\n\n**Query Parameters:**\n- `business_id` (required): Identifies which business's chatbot to use\n\n**Request:**\n- Twilio webhook payload (form-encoded)\n\n**Response:**\n- TwiML XML to start media stream"
					},
					"response": []
				}
			],
			"description": "Voice endpoints for Twilio phone call integration. Note: WebSocket /media-stream endpoint cannot be tested in Postman - use a WebSocket client or Twilio directly."
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://wpgrowth.site:8000",
			"type": "string"
		},
		{
			"key": "admin_api_key",
			"value": "your_admin_api_key_here",
			"type": "string"
		}
	]
}
